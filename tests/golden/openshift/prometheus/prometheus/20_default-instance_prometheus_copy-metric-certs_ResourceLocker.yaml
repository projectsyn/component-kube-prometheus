apiVersion: redhatcop.redhat.io/v1alpha1
kind: ResourceLocker
metadata:
  annotations:
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
    source: https://github.com/projectsyn/component-prometheus
  labels:
    app.kubernetes.io/managed-by: commodore
    app.kubernetes.io/part-of: syn
    name: copy-metric-certs
  name: copy-metric-certs
  namespace: syn-resource-locker
spec:
  patches:
    - id: patch-1
      patchTemplate: "data:\n  tls.crt: {{ index (index . 0).data \"tls.crt\" }}\n\
        \  tls.key: {{ index (index . 0).data \"tls.key\" }}\n"
      patchType: application/strategic-merge-patch+json
      sourceObjectRefs:
        - apiVersion: v1
          kind: Secret
          name: metrics-client-certs
          namespace: openshift-monitoring
      targetObjectRef:
        apiVersion: v1
        kind: Secret
        name: copy-metric-certs
        namespace: syn-prometheus
  serviceAccountRef:
    name: copy-metric-certs-manager
